<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>howto/how2-for-keystores · eMagiz Platform documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## 1. CONTEXT AND REQUIREMENTS   "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="howto/how2-for-keystores · eMagiz Platform documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://emagiz.github.io/"/><meta property="og:description" content="## 1. CONTEXT AND REQUIREMENTS   "/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/platypus.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/platypus.png" alt="eMagiz Platform documentation"/><h2 class="headerTitleWithLogo">eMagiz Platform documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Ask me something" title="Ask me something"/></li><li class=""><a href="/docs/referenceguide/" target="_self">Reference Guide</a></li><li class=""><a href="/docs/howto/" target="_self">User Guides</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">howto/how2-for-keystores</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="1-context-and-requirements"></a><a href="#1-context-and-requirements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. CONTEXT AND REQUIREMENTS</h2>
<p>This document explains how to create a java trust- and keystore to be used in the eMagiz create phase. Specifically for the support object SSL web service message sender used by the web service outbound gateway. The goal of this being to set up a Two-Way SSL authentication. In other scenarios please consult an expert regarding eMagiz.
The assumed starting point of this document is that you have already received (either from the customer  a .p12 file containing the keypair and a .cer file containing the to be trusted certificate .</p>
<h2><a class="anchor" aria-hidden="true" id="2---best-practices"></a><a href="#2---best-practices" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2.   BEST PRACTICES</h2>
<p>•   When you have different certificates for test, acceptance or production, you should use a property for the trust- and key store path in your SSL web service message sender component. So that you may use the right keystore for each environment.
•   Save the passwords you set for the keystores in KeePass so you have a backup for the passes in case someone changes or deletes your properties.
•   Save the certificates in CSP under Registration so you can set a notification for when the certificate is about to expire.
•   Save the certificate and the keystore under the same password to prevent problems</p>
<h2><a class="anchor" aria-hidden="true" id="3---how-to-steps"></a><a href="#3---how-to-steps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.   HOW-TO STEPS</h2>
<p>Follow these steps carefully in order to acquire the desired result.
Before you head into the how-to steps make sure you have downloaded the program Keystore Explorer from the internet. We will use this program to create our trust- and keystore.
How to create a java truststore – containing your trusted certificate(s)</p>
<ol>
<li>Open Keystore Explorer.</li>
<li>Select Create a new keystore.
(Truststores in this context are just keystores that have trusted certificates)</li>
<li>Select JKS (Java Key Store) and press OK.</li>
<li>Click the Import Trusted Certificate button as can be seen below.</li>
</ol>
<p align="center"><img  src="../../img/howto/keystores-section3-1.png"></p>
5.  Select the concerning certificate (.cer file).
6.  Save the file and secure it with an appropriate password that matches the password of the keystore (step 7)
7.  Give the keystore an appropriate password.
8.  Save the keystore with an appropriate name as an .jks file.
<p>How to create a java keystore – containing your keypair</p>
<ol start="9">
<li>Open Keystore Explorer.</li>
<li>Select Create a new keystore.</li>
<li>Select JKS (Java Key Store) and press OK.</li>
<li>Click the Import Key Pair as can be seen below.</li>
</ol>
<p align="center"><img  src="../../img/howto/keystores-section3-2.png"></p>
<ol start="13">
<li>Select PKCS #12 (assuming you received a .p12 file)</li>
<li>Type in the Decryption Password and select the .p12 file</li>
<li>Save the file and secure it with an appropriate password that matches the password of the keystore (step 7)</li>
<li>Give the keystore an appropriate password.</li>
<li>Save the keystore with an appropriate name as an .jks file.</li>
</ol>
<p>How to use a SSL web service message sender in your eMagiz flow to set-up a Two-Way SSL Authentication: Same key- and truststore for all environments</p>
<ol start="18">
<li>Open your flow and start editing.</li>
<li>Create your web service outbound gateway if you have not done that already.</li>
<li>Upload the key- and truststore in the Resources tab.</li>
<li>Create your SSL web service message sender.</li>
<li>Select your key- and truststore in the key- and truststore paths.</li>
<li>Create your key- and truststore password properties and type them in the appropriate fields.</li>
</ol>
<p align="center"><img  src="../../img/howto/keystores-section3-3.png"></p>
24. Open your web service outbound gateway, go to the advanced tab and select your SSL web service message sender in the Message sender field.
<p>How to use a SSL web service message sender in your eMagiz flow to set-up a Two-Way SSL Authentication: Different key- and truststores for every environment</p>
<ol start="25">
<li>Open your flow and start editing.</li>
<li>Create your web service outbound gateway if you have not done that already.</li>
<li>Upload all the key- and truststores in the Resources tab (in this case we have different key- and truststores for acceptance and production).</li>
</ol>
<p align="center"><img  src="../../img/howto/keystores-section3-4.png"></p>
28. Now download all your key- and truststores to know what their paths will be.
<p align="center"><img  src="../../img/howto/keystores-section3-5.png"></p>
<ol start="29">
<li>For each environment create a key- and trustore property containing the path to your key- and truststore. The value should be: “resources/[filename of the key- or truststore]”. So in the case of the acceptance keystore this would be:
“resources/00-103915_emagiz_esb_a19_keystore.jks”</li>
</ol>
<p align="center"><img  src="../../img/howto/keystores-section3-6.png"></p>
30. Create your SSL web service message sender.
31. Type in your key- and truststore path properties.
32. Create your key- and truststore password properties and type them in the appropriate fields.
<p align="center"><img  src="../../img/howto/keystores-section3-7.png"></p>
33. Open your web service outbound gateway, go to the advanced tab and select your SSL web service message sender in the Message sender field.
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#1-context-and-requirements">1. CONTEXT AND REQUIREMENTS</a></li><li><a href="#2---best-practices">2.   BEST PRACTICES</a></li><li><a href="#3---how-to-steps">3.   HOW-TO STEPS</a></li></ul></nav></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2e1804e3e0c239242d9914d98d6bf260',
                indexName: 'emagiz',
                inputSelector: '#search_input_react'
              });
            </script></body></html>